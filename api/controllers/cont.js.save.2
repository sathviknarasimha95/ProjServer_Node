'use strict';

exports.list_all_users = function(req, res){
  req.getConnection(function(err,connection){
       
     connection.query('SELECT * FROM sample',function(err,rows)     {
            
        if(err)
           console.log("Error Selecting : %s ",err );
     
            res.send(rows);
                           
         });
       
    });
  
};

exports.creat_users = function(req,res) { 
  req.getConnection(function(err,connection){
	
	var id = req.param('id');
	var name = req.param('name');;
	console.log(id);
	console.log(name);
	var post = {id:id,name:name};
	console.log(post.id);
	connection.query('INSERT INTO sample SET ?',post,function(err,result) {
				if(err) throw err;
				res.send("1 row inserted");
			});
	});
};
exports.login = function(req,res) {
  req.getConnection(function(err,connection){
	
	var email = req.param('email');
	var password = req.param('password');
	var post = {email:email,password:password};
	connection.query('SELECT * from login where email = ?',post.email,function(err,result) {
				if(err) {
\					if (error) {
    // console.log("error ocurred",error);
    res.send({
      "code":400,
      "failed":"error ocurred"
    })
  }else{
    // console.log('The solution is: ', results);
    if(results.length >0){
      if([0].password == password){
        res.send({
          "code":200,
          "success":"login sucessfull"
            });
      }
				
			});
	});
};
